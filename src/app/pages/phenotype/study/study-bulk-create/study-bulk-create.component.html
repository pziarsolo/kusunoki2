<mat-card >
    <mat-card-title>Upload
        <span *ngIf='entityTypePlural'>{{entityTypePlural}}</span>
        <span *ngIf='!entityTypePlural'>{{entityType}}s</span>
    </mat-card-title>
    <mat-card-content *ngIf='!uploadTried && !uploadSuccessful' >
        <div>
            <p>You can add multiple {{entityTypePlural}} uploading one file.</p>
            <p>The file must be and excel file and must have a formated header</p>
            <p><a [href]="exampleFileUrl">Example File</a></p>

            <mat-expansion-panel>
                <mat-expansion-panel-header>Column definitions</mat-expansion-panel-header>
                <h4 style='margin-left: 10px; color: gray'>Fields colored with blue are mandatory</h4>
                <mat-list *ngIf="fieldConfiguration">
                    <mat-list-item *ngFor="let field of fieldConfiguration">
                        <h3 matLine *ngIf='field.mandatory' class='key'>{{field.name}}</h3>
                        <h3 matLine *ngIf='!field.mandatory' >{{field.name}}</h3>
                        <span matLine>{{field.description}}</span>
                        <mat-divider></mat-divider>
                    </mat-list-item>
                </mat-list>
            </mat-expansion-panel>
        </div>
        <mat-card-actions>
            <button mat-raised-button color='accent' (click)="file.click()">Upload file</button>
            <input hidden type="file" #file (change)="onFileAdded()">
        </mat-card-actions>

    </mat-card-content>
    <mat-spinner *ngIf="processing">
    </mat-spinner>
    <mat-card-content *ngIf='uploadTried && uploadSuccessful === false'>
        <p>Something went wrong</p>
        <mat-list *ngIf="errors">
            <mat-list-item *ngFor='let error of errors.detail'>
                <mat-icon>clear</mat-icon>{{error}}
            </mat-list-item>
        </mat-list>
    </mat-card-content>
    <mat-card-content *ngIf='uploadTried && uploadSuccessful'>
        <p>File succesfully uploaded</p>
        <p>{{num_uploaded}} {{entityType}}}s added</p>
    </mat-card-content>
</mat-card>